## Two Dimensional Process Simulation of 4H-SiC SiliconCarbide Power MOSFET
## --------------------------------------------------------------------
## Global mesh settings and mesh in newly generated layers
## --------------------------------------------------------------------
grid set.min.normal.size= 0.002 \
     set.normal.growth.ratio.2d= 1.8

## SiliconCarbide interface refinement
refinebox interface.materials= { SiliconCarbide } 

fset Fastmode 0
if { $Fastmode == 1} {
    pdbSet ImplantData NoImplant 1
    pdbSet Diffuse NoDiffusionReaction 1
}

## Log output level
pdbSet InfoDefault 1

## Multi-threading
math numThreads= 8

## Using Universal Coordinate System (x down | y right)
math coord.ucs

## Calibrated set-up for Implantation of Dopants in 4H-SiC
AdvancedCalibration 4H-SiC
pdbSet ImplantData MonteCarlo 1
pdbSet MCImplant Particles 5000

## Geometric Parameter Definitions..

fset tsub 10.0
fset p_top 0.0
fset p_epibot [expr $p_top + @Ndrift_Thickness@]
fset p_bot [expr $p_epibot + $tsub]
fset Xmax [expr @Ndrift_Thickness@ + $tsub]

fset Lch @Lch@
fset Yext 1.0
fset pw_ledge @YJFET@
fset np_ledge [expr $pw_ledge + $Lch] 
fset np_redge [expr $np_ledge + 1.0]
fset pp_redge [expr $np_redge + 1.0]
fset Ymax [expr $pp_redge + $Yext]

fset Ypolyl [expr $pw_ledge + $Lch]

## -------------------------------------------------------------
## Mask definitions
## -------------------------------------------------------------
mask name= PWELL left= $pw_ledge right= $Ymax
mask name= JFET  left= $pw_ledge right= $Ymax negative
mask name= POLY  left= @Ypolyl@  right= $np_ledge negative
mask name= NPLUS left= $np_ledge right= $np_redge
mask name= PPLUS left= $np_redge right= $pp_redge
mask name= CONT  left= [expr $np_redge - 0.25] right= [expr $pp_redge - 0.25] negative

## Line commands
line x location= $p_epibot tag= top
line x location= $p_bot tag= bottom

line y location= 0.0 tag= left
line y location= $pw_ledge tag= pw_ledge
line y location= $np_ledge tag= np_ledge
line y location= $np_redge tag= np_redge
line y location= $pp_redge tag= pp_redge
line y location= $Ymax tag= right

## Simulation Initialization
region SiliconCarbide xlo= top xhi= bottom ylo= left yhi= right substrate
init field= Nitrogen concentration= @Sub_Doping@ miscut.tilt= 4.0 \
	miscut.toward= {1 1 0} 

### Epi: Nitrogen drift layer
refinebox name=Epi min= 0.0 max= $p_epibot xrefine= "0.01 0.1 0.01"
grid remesh

fset epi_thickness @Ndrift_Thickness@
set epi_time 360
set th1 $epi_thickness*0.1
set th2 $epi_thickness*0.1
set th3 $epi_thickness*0.8
set time1 $epi_time*0.1
set time2 $epi_time*0.1
set time3 $epi_time*0.8
deposit SiliconCarbide anisotropic thickness= $th1 species= Nitrogen concentration= @Ndrift_Doping@
diffuse temperature=1600 time=$time1
deposit SiliconCarbide anisotropic thickness= $th2 species= Nitrogen concentration= @Ndrift_Doping@
diffuse temperature=1600 time=$time2                      
deposit SiliconCarbide anisotropic thickness= $th3 species= Nitrogen concentration= @Ndrift_Doping@
diffuse temperature=1600 time=$time3

## P-Well implantation
photo mask= PWELL thickness= 2.0
refinebox name= PWELL1 mask= PWELL extrusion.min= 0.0 extrusion.max= 1.5 extend= 0.5 xrefine= 0.1
refinebox name= PWELL2 mask= PWELL min= 0.0 max= 1.0 mask.edge.mns= 0.02 mask.edge.ngr= 1.1 mask.edge.refine.extent= 0.5
grid remesh

implant Aluminum dose= @<pWD * 0.1>@ energy= 200
implant Aluminum dose= @<pWD * 0.2>@ energy= 300
implant Aluminum dose= @<pWD * 0.4>@ energy= 400
implant Aluminum dose= @<pWD * 0.3>@ energy= 500

## Remove PhotoResist
strip photo

## N+ Source implantation
photo mask= NPLUS thickness= 10.0
refinebox name=NPLUS1 mask= NPLUS extrusion.min= 0.0 extrusion.max= 0.4 extend= 0.1 xrefine= 0.02
refinebox name=NPLUS2 mask= NPLUS min= 0.0 max= 0.3 mask.edge.mns= 0.01 mask.edge.ngr= 1.2 mask.edge.refine.extent= 0.8
grid remesh

## Nplus 
implant Nitrogen dose= @<nPD * 0.1>@ energy= 60 
implant Nitrogen dose= @<nPD * 0.2>@ energy= 80 
implant Nitrogen dose= @<nPD * 0.4>@ energy= 100
implant Nitrogen dose= @<nPD * 0.3>@ energy= 120  

## Remove PhotoResist
strip photo

#if @JFET@ == 1
photo mask= JFET thickness= 2.0
refinebox name= JFET1 mask= JFET extrusion.min= 0.0 extrusion.max= 1.5 extend= 0.5 xrefine= 0.1
refinebox name= JFET2 mask= JFET min= 0.0 max= 1.0 mask.edge.mns= 0.02 mask.edge.ngr= 1.1 mask.edge.refine.extent= 0.5
grid remesh

implant Nitrogen dose= @<nJD>@ energy= 100
implant Nitrogen dose= @<nJD>@ energy= 200
implant Nitrogen dose= @<nJD>@ energy= 300

#endif

#if @PB@ == 1
## P+ Source implantation
mask name= PPLUSA segments= { 0.0 @<Ypolyl*0.5>@ $np_redge $pp_redge }
photo mask= PPLUSA thickness= 10.0
refinebox name= PPLUS1 mask= PPLUSA extrusion.min= 0.0 extrusion.max= 0.5 extend= 0.1 xrefine= 0.02
refinebox name= PPLUS2 mask= PPLUSA min= 0.0 max= 0.5 mask.edge.mns= 0.01 mask.edge.ngr= 1.2 mask.edge.refine.extent= 0.8
grid remesh
#else
photo mask= PPLUS thickness= 10.0
refinebox name= PPLUS1 mask= PPLUS extrusion.min= 0.0 extrusion.max= 0.5 extend= 0.1 xrefine= 0.02
refinebox name= PPLUS2 mask= PPLUS min= 0.0 max= 0.5 mask.edge.mns= 0.01 mask.edge.ngr= 1.2 mask.edge.refine.extent= 0.8
grid remesh
#endif

pdbSet MCImplant Intervals dy 0.01

## Pplus 
implant Aluminum dose= @<pPD * 0.5>@ energy= 30 tilt= 0
implant Aluminum dose= @<pPD * 0.3>@ energy= 60 tilt= 0 

## Remove PhotoResist
strip photo

## High Temperature Annealing
diffuse time= 5<min> temperature= 1800<C>

## Gate oxidation -- wet oxidation
diffuse time= 300.0 temp= 1215 H2O

#split GATE

## Poly gate formation
deposit PolySilicon anisotropic mask= POLY thickness= 0.2

## ILD deposition
deposit Oxide thickness= 0.5 isotropic

## Etch source contact
mask name= CONTA left= 0.0 right= @<Ypolyl*0.5>@ negative
etch Oxide thickness= 0.8 anisotropic mask= CONT

#if @CONTL@ == 1
etch Oxide thickness= @tOXetch@ anisotropic mask= CONTA
#endif

## Aluminum deposition for the source contact
deposit Aluminum thickness= 1.0 isotropic

#split Device_Mesh

## Contacts placement for electrical simulation
contact name= gate point x= -0.2 y= 1.6 PolySilicon
contact name= source point x= -1.0 y= $np_redge+0.6 Aluminum
contact name= drain bottom


## Re-meshing for device simulations
refinebox clear
line clear

pdbSet Grid AdaptiveField Refine.Abs.Error 1.0e37
pdbSet Grid AdaptiveField Refine.Rel.Error 1e10
pdbSet Grid SnMesh DelaunayType boxmethod

refinebox name= Global \
 refine.max.edge= "1.0 0.5" refine.min.edge= "@< 0.03 * Device_Mesh >@ @< 0.03 * Device_Mesh >@" \
 refine.fields= { NetActive } def.max.asinhdiff= 1 \
 adaptive SiliconCarbide
 
refinebox name= Ref_active \
 refine.max.edge= "0.3 0.3" refine.min.edge= "@< 0.01 * Device_Mesh >@ @< 0.01 * Device_Mesh >@" \
 refine.fields= { NetActive } def.max.asinhdiff= 1 \
 adaptive SiliconCarbide min= "0.0 0.0" max= "3.0 5.0"
 
## Oxide interface refinement 
refinebox name= Ref_channel min.normal.size= @< 0.002 * Device_Mesh >@ normal.growth.ratio= 2.5 \
 interface.materials= { SiliconCarbide } min= "0 $pw_ledge" max= "0.2 $np_ledge"

grid remesh

## Save TDR for device simulation
struct tdr= n@node@ !Gas




##-----------------------------------------------------------------------
# Copyright (C) 1994-2023 Synopsys Inc.
# swbtree vV-2023.12, saved by gsub0

# --- simulation flow
NMOS sprocess "" {}
NMOS Lch "0.5" {0.5} V
NMOS PB "0" {0 1} V
NMOS JFET "1" {0 1} V
NMOS YJFET "2.0" {2.0 1.5} V
NMOS Ypolyl "0" {0 1.0} V
NMOS pWD "1e13" {3e13} V
NMOS nJD "3e13" {1e12 1e11} V
NMOS nPD "2e15" {5e+15} V
NMOS pPD "2e15" {2e15} V
NMOS Process_Mesh "1.0" {1.0} V
NMOS Sub_Doping "1.0e19" {1.0e19} V
NMOS Ndrift_Thickness "10.0" {10.0} V
NMOS Ndrift_Doping "2e15" {2e15} R
NMOS GATE "1" {1} V+
NMOS CONTL "0" {0 1} V
NMOS tOXetch "0.5" {0.5 1.0} R
NMOS Device_Mesh "1.0" {1.0} R+
IdVg sdevice "" {}
IdVg FC "1.8e12" {6e11} V
IdVg AF "1.0e5" {852500} V
IdVg Tamb "300.0" {300.0} V
IdVg Vd "10.0" {10.0} R
Plot_IdVg svisual "" {}
IdVd sdevice "" {}
IdVd Vg "15.0" {15.0} R
Plot_IdVd svisual "" {}
BV sdevice "" {}
BV Scale "1e-3" {1.0e5} R
Plot_BV svisual "" {}
Qg sdevice "" {}
Qg Id1 "10.0" {10.0} R
Plot_Qg svisual "" {}
SW sdevice "" {}
SW VgMax "8.0" {15.0} V
SW Idc "200" {20} V
SW Rgsw "1.0" {1.0} V
SW Ldsw "10e-09" {10e-06} V
SW Vdc "600" {600.0} R
Plot_SW svisual "" {}
SC sdevice "" {}
SC Vx1 "300" {600} V
SC ton "5e-6" {5e-6} V
SC toff "10e-6" {10e-6} V
SC Tdel "10e-9" {10e-9} R
Plot_SC svisual "" {}
UIS sdevice "" {}
UIS PWidth "100e-6" {10e-6} V
UIS L "100" {100} R
Plot_UIS svisual "" {}
# --- variables
# --- scenarios and parameter specs
scenario default Lch ""
scenario default PB ""
scenario default JFET ""
scenario default YJFET ""
scenario default Ypolyl ""
scenario default pWD ""
scenario default nJD ""
scenario default nPD ""
scenario default pPD ""
scenario default Process_Mesh ""
scenario default Sub_Doping ""
scenario default Ndrift_Thickness ""
scenario default Ndrift_Doping ""
scenario default GATE ""
scenario default CONTL ""
scenario default tOXetch ""
scenario default Device_Mesh ""
scenario default FC ""
scenario default AF ""
scenario default Tamb ""
scenario default Vd ""
scenario default Vg ""
scenario default Scale ""
scenario default Id1 ""
scenario default VgMax ""
scenario default Idc ""
scenario default Rgsw ""
scenario default Ldsw ""
scenario default Vdc ""
scenario default Vx1 ""
scenario default ton ""
scenario default toff ""
scenario default Tdel ""
scenario default PWidth ""
scenario default L ""
scenario sensDOE_1 Lch ""
scenario sensDOE_1 PB ""
scenario sensDOE_1 JFET ""
scenario sensDOE_1 YJFET ""
scenario sensDOE_1 Ypolyl ""
scenario sensDOE_1 pWD ""
scenario sensDOE_1 nJD ""
scenario sensDOE_1 nPD ""
scenario sensDOE_1 pPD ""
scenario sensDOE_1 Process_Mesh ""
scenario sensDOE_1 Sub_Doping ""
scenario sensDOE_1 Ndrift_Thickness ""
scenario sensDOE_1 Ndrift_Doping ""
scenario sensDOE_1 GATE ""
scenario sensDOE_1 CONTL ""
scenario sensDOE_1 tOXetch ""
scenario sensDOE_1 Device_Mesh ""
scenario sensDOE_1 FC ""
scenario sensDOE_1 AF ""
scenario sensDOE_1 Tamb ""
scenario sensDOE_1 Vd ""
scenario sensDOE_1 Vg ""
scenario sensDOE_1 Scale ""
scenario sensDOE_1 Id1 ""
scenario sensDOE_1 VgMax ""
scenario sensDOE_1 Idc ""
scenario sensDOE_1 Rgsw ""
scenario sensDOE_1 Ldsw ""
scenario sensDOE_1 Vdc ""
scenario sensDOE_1 Vx1 ""
scenario sensDOE_1 ton ""
scenario sensDOE_1 toff ""
scenario sensDOE_1 Tdel ""
scenario sensDOE_1 PWidth ""
scenario sensDOE_1 L ""
# --- simulation tree
0 1 0 {} {default} 0
1 2 1 {0.5} {default} 0
2 3 2 {0} {default} 0
3 5 3 {0} {default} 0
4 8 5 {2.0} {default} 0
5 11 8 {0} {default} 0
6 15 11 {3e13} {default} 0
7 19 15 {1e12} {default} 0
8 23 19 {5e+15} {default} 0
9 27 23 {2e15} {default} 0
10 31 27 {1.0} {default} 0
11 35 31 {1.0e19} {default} 0
12 39 35 {10.0} {default} 0
13 43 39 {2e15} {default} 0
14 47 43 {1} {default} 0
15 51 47 {0} {default} 0
16 55 51 {0.5} {default} 0
17 59 55 {1.0} {default} 0
18 63 59 {} {default} 0
19 67 63 {6e11} {default} 0
20 71 67 {852500} {default} 0
21 75 71 {300.0} {default} 0
22 79 75 {10.0} {default} 0
23 83 79 {} {default} 0
24 87 83 {} {default} 0
25 91 87 {15.0} {default} 0
26 95 91 {} {default} 0
27 99 95 {} {default} 0
28 103 99 {1.0e5} {default} 0
29 107 103 {} {default} 0
30 111 107 {} {default} 0
31 115 111 {10.0} {default} 0
32 119 115 {} {default} 0
33 123 119 {} {default} 0
34 127 123 {15.0} {default} 0
35 131 127 {20} {default} 0
36 135 131 {1.0} {default} 0
37 139 135 {10e-06} {default} 0
38 143 139 {600.0} {default} 0
39 147 143 {} {default} 0
40 151 147 {} {default} 0
41 155 151 {600} {default} 0
42 159 155 {5e-6} {default} 0
43 163 159 {10e-6} {default} 0
44 167 163 {10e-9} {default} 0
45 171 167 {} {default} 0
46 175 171 {} {default} 0
47 179 175 {10e-6} {default} 0
48 183 179 {100} {default} 0
49 187 183 {} {default} 0
5 12 8 {1.0} {default} 0
6 16 12 {3e13} {default} 0
7 20 16 {1e12} {default} 0
8 24 20 {5e+15} {default} 0
9 28 24 {2e15} {default} 0
10 32 28 {1.0} {default} 0
11 36 32 {1.0e19} {default} 0
12 40 36 {10.0} {default} 0
13 44 40 {2e15} {default} 0
14 48 44 {1} {default} 0
15 52 48 {0} {default} 0
16 56 52 {0.5} {default} 0
17 60 56 {1.0} {default} 0
18 64 60 {} {default} 0
19 68 64 {6e11} {default} 0
20 72 68 {852500} {default} 0
21 76 72 {300.0} {default} 0
22 80 76 {10.0} {default} 0
23 84 80 {} {default} 0
24 88 84 {} {default} 0
25 92 88 {15.0} {default} 0
26 96 92 {} {default} 0
27 100 96 {} {default} 0
28 104 100 {1.0e5} {default} 0
29 108 104 {} {default} 0
30 112 108 {} {default} 0
31 116 112 {10.0} {default} 0
32 120 116 {} {default} 0
33 124 120 {} {default} 0
34 128 124 {15.0} {default} 0
35 132 128 {20} {default} 0
36 136 132 {1.0} {default} 0
37 140 136 {10e-06} {default} 0
38 144 140 {600.0} {default} 0
39 148 144 {} {default} 0
40 152 148 {} {default} 0
41 156 152 {600} {default} 0
42 160 156 {5e-6} {default} 0
43 164 160 {10e-6} {default} 0
44 168 164 {10e-9} {default} 0
45 172 168 {} {default} 0
46 176 172 {} {default} 0
47 180 176 {10e-6} {default} 0
48 184 180 {100} {default} 0
49 188 184 {} {default} 0
2 4 2 {1} {default} 0
3 6 4 {0} {default} 0
4 9 6 {1.5} {default} 0
5 13 9 {1.0} {default} 0
6 17 13 {3e13} {default} 0
7 21 17 {1e11} {default} 0
8 25 21 {5e+15} {default} 0
9 29 25 {2e15} {default} 0
10 33 29 {1.0} {default} 0
11 37 33 {1.0e19} {default} 0
12 41 37 {10.0} {default} 0
13 45 41 {2e15} {default} 0
14 49 45 {1} {default} 0
15 53 49 {1} {default} 0
16 57 53 {1.0} {default} 0
17 61 57 {1.0} {default} 0
18 65 61 {} {default} 0
19 69 65 {6e11} {default} 0
20 73 69 {852500} {default} 0
21 77 73 {300.0} {default} 0
22 81 77 {10.0} {default} 0
23 85 81 {} {default} 0
24 89 85 {} {default} 0
25 93 89 {15.0} {default} 0
26 97 93 {} {default} 0
27 101 97 {} {default} 0
28 105 101 {1.0e5} {default} 0
29 109 105 {} {default} 0
30 113 109 {} {default} 0
31 117 113 {10.0} {default} 0
32 121 117 {} {default} 0
33 125 121 {} {default} 0
34 129 125 {15.0} {default} 0
35 133 129 {20} {default} 0
36 137 133 {1.0} {default} 0
37 141 137 {10e-06} {default} 0
38 145 141 {600.0} {default} 0
39 149 145 {} {default} 0
40 153 149 {} {default} 0
41 157 153 {600} {default} 0
42 161 157 {5e-6} {default} 0
43 165 161 {10e-6} {default} 0
44 169 165 {10e-9} {default} 0
45 173 169 {} {default} 0
46 177 173 {} {default} 0
47 181 177 {10e-6} {default} 0
48 185 181 {100} {default} 0
49 189 185 {} {default} 0
3 7 4 {1} {default} 0
4 10 7 {1.5} {default} 0
5 14 10 {1.0} {default} 0
6 18 14 {3e13} {default} 0
7 22 18 {1e11} {default} 0
8 26 22 {5e+15} {default} 0
9 30 26 {2e15} {default} 0
10 34 30 {1.0} {default} 0
11 38 34 {1.0e19} {default} 0
12 42 38 {10.0} {default} 0
13 46 42 {2e15} {default} 0
14 50 46 {1} {default} 0
15 54 50 {1} {default} 0
16 58 54 {1.0} {default} 0
17 62 58 {1.0} {default} 0
18 66 62 {} {default} 0
19 70 66 {6e11} {default} 0
20 74 70 {852500} {default} 0
21 78 74 {300.0} {default} 0
22 82 78 {10.0} {default} 0
23 86 82 {} {default} 0
24 90 86 {} {default} 0
25 94 90 {15.0} {default} 0
26 98 94 {} {default} 0
27 102 98 {} {default} 0
28 106 102 {1.0e5} {default} 0
29 110 106 {} {default} 0
30 114 110 {} {default} 0
31 118 114 {10.0} {default} 0
32 122 118 {} {default} 0
33 126 122 {} {default} 0
34 130 126 {15.0} {default} 0
35 134 130 {20} {default} 0
36 138 134 {1.0} {default} 0
37 142 138 {10e-06} {default} 0
38 146 142 {600.0} {default} 0
39 150 146 {} {default} 0
40 154 150 {} {default} 0
41 158 154 {600} {default} 0
42 162 158 {5e-6} {default} 0
43 166 162 {10e-6} {default} 0
44 170 166 {10e-9} {default} 0
45 174 170 {} {default} 0
46 178 174 {} {default} 0
47 182 178 {10e-6} {default} 0
48 186 182 {100} {default} 0
49 190 186 {} {default} 0
