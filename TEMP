## Tool: Sentaurus Device 
## Characteristics: Breakdown Voltage
## Dependency: Should be run after the process simulation of NMOS device
#setdep @node|sde@

## Initial settings for Double Trench NMOS power device simulations

File {
	grid      = "n@node|sde@_msh.tdr"
	current   = "@plot@"	
	plot      = "@tdrdat@"
	parameter = "@parameter@"	
	
}

## Electrical contacts
Electrode {
	
	{ Name="drain" Voltage= 0.0 Resist= @<AF/1e-8>@ }   
	{ Name="source" Voltage= 0.0 }
	{ Name="gate" Voltage= 0.0 Material= "PolySi"}
	
}

## Physics models
Physics {
	Fermi
	AreaFactor  = @AF@
	EffectiveIntrinsicDensity ( OldSlotboom NoFermi )
	Recombination (
		SRH(DopingDependence TempDependence)
		Auger
		Avalanche(Okuto)
	)  
	Mobility ( 
		DopingDependence(Arora)		
		Enormal(IALMob InterfaceCharge)		
		HighFieldSaturation
	)
	
	IncompleteIonization (
		Split (
			Doping = "NitrogenConcentration"
			Weights = (0.5 0.5)
		)
	)
	Aniso (
		Mobility 
		Avalanche
		direction(SimulationSystem) = (1,0,0)
	)	
}
Math {
	Digits= 5	
	* Extrapolate
	ErrEff(electron)= 1e5
	ErrEff(hole)= 1e5
	
		
	Notdamped= 20
	Iterations= 18
	CheckRhsAfterUpdate
	RhsMin= 1e-4
	RHSMax= 1e60
	RHSFactor= 1e60
	
	ExitOnFailure

		ExtendedPrecision(80)
		CDensityMin= 1e-25	
		BreakCriteria{Current (Contact="drain" absval=1.0e-5)}	

	
		TensorGridAniso(aniso)
	NumberofThreads= 4	
	Method= Blocked
	Transient= BE
	SubMethod= ILS(set= 6)
	ACSubMethod= ILS(set= 6)
	ILSrc="
		set(6){  
			iterative(gmres(100), tolrel=1e-10, tolunprec=1e-4, tolabs=0, maxit=200);
			# preconditioning(ilut(1.0e-9,-1), right);
			preconditioning(ilut(1.0e-6,-1), right);
			ordering(symmetric=nd, nonsymmetric=mpsilst);
			options(compact=yes, linscale=0, refineresidual=10, verbose=0);
		};"  		
}
Plot {
	Potential SpaceCharge
	eDensity hDensity
	eCurrent hCurrent TotalCurrent/vector Current CurrentPotential
	ElectricField/vector
	eQuasiFermi hQuasiFermi
	egradQuasiFermi hgradQuasiFermi
	SRH Auger
	AvalancheGeneration eAvalanche hAvalanche
	eMobility hMobility
	eMobilityAniso hMobilityAniso
	eMobilityAnisoFactor hMobilityAnisoFactor
	DielectricConstant DielectricConstantAniso
	Doping DonorConcentration DonorPlusConcentration AcceptorConcentration AccepMinusConcentration
	NitrogenConcentration NitrogenActiveConcentration
	NitrogenConcentration_split1 NitrogenActiveConcentration_split1 NitrogenPlusConcentration_split1
	NitrogenConcentration_split2 NitrogenActiveConcentration_split2 NitrogenPlusConcentration_split2
	AluminumConcentration AluminumActiveConcentration
	ConductionBandEnergy ValenceBandEnergy BandGap
	
	# Traps visualization
	eTrappedCharge hTrappedCharge
	eInterfaceTrappedCharge hInterfaceTrappedCharge
	eGapStatesRecombination hGapStatesRecombination
	TotalInterfaceTrapConcentration
}

Solve {
   Coupled(Iterations= 10000 LineSearchDamping= 1e-4) { Poisson }
   Coupled(Iterations= 1000 LineSearchDamping= 0.001 ) { Poisson Hole }
   Coupled(Iterations= 1000 LineSearchDamping= 0.001 ) { Poisson Electron Hole  }
    NewCurrentPrefix="BV_"
   Transient (
	
	BreakCriteria { Current(contact="drain" AbsVal= 1.0) }
	
    InitialTime = 0
    FinalTime = @Scale@
    Goal {
      name= drain
      voltage= 1e5
    }
    InitialStep= 1e-09
    MaxStep= 0.01
    MinStep= 1e-20 Increment= 2.0 Decrement= 2.5 )
    { coupled { poisson electron hole }}		
#   System ("rm n@node@_des.plt")
}
